<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart | ShopSphere</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="header">
    <div class="logo">
        <img src="images/logo.png" alt="ShopSphere Logo">
        <span>ShopSphere</span>
    </div>
    <div class="menu-toggle" id="menu-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
        <nav class="navbar" id="navbar">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="product.html">Products Detail</a></li>
                <li><a href="cart.html">Cart</a></li>
                <li><a href="checkout.html">Checkout</a></li>
            </ul>
        </nav>
    </header>

   <div class="cart-container">
    <h1>Your Shopping Cart</h1>

    <table id="cartTable">
      <thead>
        <tr>
          <th>Image</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Remove</th>
        </tr>
      </thead>
      <tbody id="cartItems">
          </tbody>
    </table>

  <div class="total" id="totalAmount">
      Total: Rs. 0
    </div>

    <button class="checkout-btn" onclick="goToCheckout()">Proceed to Checkout</button>
  </div>

  <div class="cart-count-display">
    Cart (<span data-cart-count>0</span>)
  </div>

    <footer class="footer">
    <div class="footer-container">
        <div class="footer-section footer-links">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="product.html">Product Detail</a></li>
                <li><a href="cart.html">Cart</a></li>
                <li><a href="checkout.html">Checkout</a></li>
            </ul>
        </div>
        <div class="footer-section footer-socials">
            <h3>Follow Us</h3>
            <div class="socials">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin-in"></i></a>
            </div>
        </div>
        <div class="footer-section footer-about">
            <h3>About Us</h3>
            <p>ShopSphere is a modern e-commerce platform dedicated to bringing the best shopping experience to your fingertips. We offer a wide range of high-quality products, from electronics and fashion to home essentials, all carefully curated to meet your needs. Our mission is to make online shopping simple, convenient, and enjoyable, with fast delivery, secure payments, and excellent customer service.</p>
        </div>
    </div>
        <div class="footer-bottom">
            <p>Â© 2025 ShopSphere. All rights reserved.</p>
        </div>
    </footer>
    <script src="script.js"> 
    
</script>
<script>
   document.addEventListener("DOMContentLoaded", () => {
  const cartTableBody = document.querySelector("#cartTable tbody");
  const totalAmountEl = document.getElementById("totalAmount");
  const cartCountEl = document.querySelector("[data-cart-count]");

  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  function formatPrice(price) {
    return `Rs. ${price.toLocaleString()}`;
  }

  function renderCart() {
    cartTableBody.innerHTML = "";
    let total = 0;

    cart.forEach((item, index) => {
      const row = document.createElement("tr");

      // Ensure price is a number
      const itemPrice = Number(item.price) || 0;
      const itemTotal = itemPrice * item.quantity;
      total += itemTotal;

      row.innerHTML = `
        <td><img src="${item.image}" alt="${item.name}" width="50"></td>
        <td>${item.name}</td>
        <td>
          <input type="number" min="1" value="${item.quantity}" data-index="${index}" class="qty-input">
        </td>
        <td>${formatPrice(itemTotal)}</td>
        <td>
          <button class="remove-btn" data-index="${index}">X</button>
        </td>
      `;

      cartTableBody.appendChild(row);
    });

    totalAmountEl.textContent = `Total: ${formatPrice(total)}`;
    cartCountEl.textContent = cart.length;
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  // Handle quantity change
  cartTableBody.addEventListener("input", (e) => {
    if (e.target.classList.contains("qty-input")) {
      const index = e.target.dataset.index;
      const newQty = parseInt(e.target.value, 10);
      if (newQty > 0) {
        cart[index].quantity = newQty;
        renderCart();
      }
    }
  });

  // Handle remove button
  cartTableBody.addEventListener("click", (e) => {
    if (e.target.classList.contains("remove-btn")) {
      const index = e.target.dataset.index;
      cart.splice(index, 1);
      renderCart();
    }
  });

  // Checkout button
  window.goToCheckout = function() {
    if (cart.length === 0) {
      alert("Your cart is empty!");
      return;
    }
    window.location.href = "checkout.html";
  };

  renderCart();
});
</script>
</body>
</html>
